{{ $currentTopic := .topic }}
{{ $currentModule := .module }}
{{ $topics := sort $currentModule.CurrentSection.Pages ".Params.index" }}

{{ range $index, $topic := $topics }}
    {{ if eq $topic $currentTopic }}
        <div class="flex">
            <!-- {{ if ne $index 0 }}
                {{ $prev := index $topics (sub $index 1) }}
                <a href="{{ $prev.RelPermalink }}" class="md:mr-4 btn btn-secondary">&larr; {{ $prev.Title }}</a>
            {{ else }}
                <a href="{{ $currentModule.RelPermalink }}" class="md:mr-4 btn btn-secondary"> &larr; Back to {{ $currentModule.Title }}</a>
            {{ end }} -->

            {{ if ne (add $index 1) (len $topics) }}
                {{ $next := index $topics (add $index 1) }}
                <a href="{{ $next.RelPermalink }}" class="btn">Next Topic: {{ $next.Title }} &rarr;</a>
            {{ else }}
                <a href="{{ $currentModule.RelPermalink }}" class="btn btn-secondary">Return to {{ $currentModule.Title }} &rarr;</a>
            {{ end }}
        </div>
    {{ end }}
{{ end }}
